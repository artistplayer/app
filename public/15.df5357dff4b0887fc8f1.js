(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"9sDO":function(n,t,l){"use strict";l.d(t,"a",function(){return a});var e=l("mrSG"),i=l("Ovi0"),o=l("ZZ/e"),r=l("CcnG"),u=l("t/Na"),a=function(n){function t(t,l){var e=n.call(this,t)||this;return e.httpClient=t,e.alertController=l,e.name="playlists",e.location="/api/v1/playlists",e}return e.d(t,n),t.prototype.create=function(){var t=this;return new Promise(function(l,i){return e.b(t,void 0,void 0,function(){var t=this;return e.e(this,function(o){switch(o.label){case 0:return[4,this.alertController.create({header:"New Playlist",inputs:[{name:"name",type:"text",placeholder:"Enter Playlist Name...",value:""}],buttons:[{text:"Cancel",role:"cancel"},{text:"Create",handler:function(o){o&&n.prototype.create.call(t,{name:o.name}).then(function(n){return e.b(t,void 0,void 0,function(){return e.e(this,function(t){return l(n),[2]})})}).catch(function(n){return i(n)})}}]})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}})})})},t.ngInjectableDef=r.S({factory:function(){return new t(r.W(u.c),r.W(o.a))},token:t,providedIn:"root"}),t}(i.b)},BcDN:function(n,t,l){"use strict";l.d(t,"a",function(){return e});var e=function(){return function(){}}()},L7MN:function(n,t,l){"use strict";l.d(t,"a",function(){return e}),l("ZZ/e"),l("QIP1");var e=function(){function n(n,t){this.platform=n,this.playerService=t,this.playonResume=!1}return n.prototype.ngOnInit=function(){this.playerService.currentTime()},n.prototype.resume=function(n){var t=this;this.playerService.setCurrentTime(this.timeSlider.value),setTimeout(function(){t.playonResume&&(t.playonResume=!1,t.playerService.setState("Playing"))},500)},n.prototype.pause=function(n){this.playerService.totalTime().time<1&&n.preventDefault(),this.playonResume="Playing"===this.playerService.status,this.playonResume&&this.playerService.setState("Paused")},n.prototype.openPlaylist=function(n){},n}()},QIP1:function(n,t,l){"use strict";var e=l("gRba"),i=l("9sDO"),o=l("3n8g"),r=l("vY5A"),u=l("K9Ia"),a=l("CcnG"),c=function(){function n(){this.stream=new u.a,this.create()}return n.prototype.create=function(){var n=this;return new Promise(function(t){n.socket=new WebSocket(r.a.socket),n.socket.addEventListener("connect",function(n){t()}),n.socket.addEventListener("message",function(t){n.stream.next(JSON.parse(t.data))})})},n.prototype.on=function(n,t){return this.stream.subscribe(function(l){l.event===n&&t(l.data,l.sender?l.sender:null)}),this},n.prototype.subscribe=function(n,t){return this.stream.subscribe(function(l){l.channel===n&&t(l.data,l.sender?l.sender:null)}),this},n.prototype.publish=function(n,t){var l=this,e=function(){l.socket.send(JSON.stringify({channel:n,event:"message",data:t}))};this.socket.readyState===this.socket.CLOSED||this.socket.readyState===this.socket.CLOSING?this.create().then(function(){return e()}):e()},n.prototype.send=function(n){var t=this,l=function(){t.socket.send(JSON.stringify({event:"message",data:n}))};this.socket.readyState===this.socket.CLOSED||this.socket.readyState===this.socket.CLOSING?this.create().then(function(){l()}):l()},n.ngInjectableDef=a.S({factory:function(){return new n},token:n,providedIn:"root"}),n}();l.d(t,"a",function(){return s});var s=function(){function n(n,t,l,e){var i=this;this.fileService=n,this.playlistService=t,this.statsService=l,this.socketService=e,this.volume=100,this.muted=!1,this.mode="normal",this.status="Paused",this.position=0,this.socketService.subscribe("omx",function(n,t){Object.keys(n).forEach(function(t){i.hasOwnProperty(t)&&(i[t]=n[t]),!n.file||!n.file.id||i.file&&i.file.id===n.file.id||(i.file=n.file,i.fileService.find(n.file.id).then(function(n){return i.file=n})),!n.playlist||!n.playlist.id||i.playlist&&i.playlist.id===n.playlist.id||(i.playlist=n.playlist,i.playlistService.find(n.playlist.id).then(function(n){return i.playlist=n}))})})}return n.prototype.setSong=function(n,t){var l=this;this.fileService.find(n).then(function(n){return l.file=n}),this.playlistService.find(t).then(function(n){return l.playlist=n}),this.socketService.publish("omx",{file:n,playlist:t})},n.prototype.isSong=function(n,t){return!!this.file&&n===this.file.id&&(!t||this.isState(t))},n.prototype.totalTime=function(){return this.convertTime(this.file?this.file.playtime:0)},n.prototype.isPlaylist=function(n){var t=this.getPlaylist();return!!t&&t.id===n},n.prototype.getPlaylist=function(){return this.playlist},n.prototype.addToQueue=function(n,t){},n.prototype.next=function(){},n.prototype.prev=function(){},n.prototype.toggleState=function(){this.file&&(this.status="Playing"===this.status?"Paused":"Playing"),this.setState(this.status)},n.prototype.setState=function(n){this.socketService.publish("omx",{status:n})},n.prototype.isState=function(n){return this.status===n},n.prototype.isMode=function(n){return this.mode===n},n.prototype.toggleMode=function(){var n=["normal","repeat","single"],t=n.indexOf(this.mode)+1;t>n.length-1&&(t=0),this.mode=n[t],this.socketService.publish("omx",{mode:this.mode})},n.prototype.setVolume=function(n){this.volume=n,this.socketService.publish("omx",{volume:n})},n.prototype.getVolume=function(){return this.volume},n.prototype.toggleMute=function(){this.socketService.publish("omx",{muted:!this.muted})},n.prototype.isMuted=function(){return this.muted},n.prototype.currentTime=function(){return this.convertTime(this.position)},n.prototype.getTimecode=function(n,t){var l="current"===t?this.currentTime():this.totalTime();return Object.keys(l).forEach(function(t){n=n.replace("{"+t+"}",l[t])}),n},n.prototype.setCurrentTime=function(n){this.socketService.publish("omx",{position:n})},n.prototype.convertTime=function(n){var t={h:0,m:0,s:0,hh:null,mm:null,ss:null,i:0,time:n};return n>0&&(t.h=Math.floor(n/60/60),t.m=Math.floor(n/60-60*t.h),t.s=Math.round(n-60*t.m-60*t.h)),t.hh=(t.h.toString().length<2?"0":null)+t.h,t.mm=(t.m.toString().length<2?"0":null)+t.m,t.ss=(t.s.toString().length<2?"0":null)+t.s,t},n.ngInjectableDef=a.S({factory:function(){return new n(a.W(e.a),a.W(i.a),a.W(o.a),a.W(c))},token:n,providedIn:"root"}),n}()},gRba:function(n,t,l){"use strict";l.d(t,"a",function(){return u});var e=l("mrSG"),i=l("Ovi0"),o=l("CcnG"),r=l("t/Na"),u=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.name="files",t.location="/api/v1/files",t}return e.d(t,n),t.ngInjectableDef=o.S({factory:function(){return new t(o.W(r.c))},token:t,providedIn:"root"}),t}(i.b)},mhqm:function(n,t,l){"use strict";l.r(t);var e=l("CcnG"),i=l("mrSG"),o=l("9sDO"),r=l("ZZ/e"),u=function(){function n(n,t){this.playlistService=n,this.navController=t}return n.prototype.ngOnInit=function(){var n=this;this.playlistService.subscribe(function(t){return n.playlists=t})},n.prototype.addPlaylist=function(){return i.b(this,void 0,void 0,function(){var n=this;return i.e(this,function(t){return this.playlistService.create().then(function(t){n.navController.navigateForward("/playlist/"+t.id)}),[2]})})},n}(),a=function(){return function(){}}(),c=l("pMnS"),s=l("ZYCi"),p=l("Ip0R"),f=l("oBZk"),h=l("fNgX"),b=l("Hf/j"),d=l("ZYjt"),v=l("oKJH"),y=l("L7MN"),m=l("QIP1"),g=e.nb({encapsulation:0,styles:[["[_nghost-%COMP%]   .square-container[_ngcontent-%COMP%]{padding:8px;max-width:1200px;margin:0 auto}[_nghost-%COMP%]   .square[_ngcontent-%COMP%]{cursor:pointer;width:calc(100% / 2);float:left;position:relative;padding-bottom:calc(100% / 2.5)}@media screen and (min-width:768px){[_nghost-%COMP%]   .square[_ngcontent-%COMP%]{width:calc(100% / 4);padding-bottom:calc(100% / 5)}}[_nghost-%COMP%]   .square[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:calc(100% - 16px);height:calc(100% - 16px);position:absolute;padding-top:calc(100% / 2.5 - 24px);font-size:24px;color:#fff;border-radius:20px;text-align:center}"]],data:{}});function k(n){return e.Hb(0,[(n()(),e.pb(0,0,null,null,7,"div",[["class","square"],["routerLinkActive","active"]],[[1,"data-index",0]],[[null,"click"]],function(n,t,l){var i=!0;return"click"===t&&(i=!1!==e.zb(n,1).onClick()&&i),"click"===t&&(i=!1!==e.zb(n,2).onClick(l)&&i),i},null,null)),e.ob(1,16384,[[1,4]],0,s.n,[s.m,s.a,[8,null],e.D,e.k],{routerLink:[0,"routerLink"]},null),e.ob(2,737280,null,0,r.Jb,[p.h,r.Gb,e.k,s.m,[2,s.n]],null,null),e.ob(3,1720320,null,2,s.o,[s.m,e.k,e.D,e.h],{routerLinkActive:[0,"routerLinkActive"]},null),e.Db(603979776,1,{links:1}),e.Db(603979776,2,{linksWithHrefs:1}),(n()(),e.pb(6,0,null,null,1,"div",[["class","content"]],null,null,null,null,null)),(n()(),e.Fb(7,null,[" "," "]))],function(n,t){n(t,1,0,"/playlist/"+t.context.$implicit.id),n(t,2,0),n(t,3,0,"active")},function(n,t){n(t,0,0,t.context.index%10),n(t,7,0,t.context.$implicit.name)})}function S(n){return e.Hb(0,[(n()(),e.pb(0,0,null,null,9,"ion-header",[],null,null,null,f.I,f.k)),e.ob(1,49152,null,0,r.A,[e.h,e.k],null,null),(n()(),e.pb(2,0,null,0,7,"ion-toolbar",[["padding-top",""],["text-left",""]],null,null,null,f.V,f.x)),e.ob(3,49152,null,0,r.Ab,[e.h,e.k],null,null),(n()(),e.pb(4,0,null,0,1,"div",[["padding-start",""]],null,null,null,null,null)),(n()(),e.Fb(-1,null,[" Playlists "])),(n()(),e.pb(6,0,null,0,3,"ion-button",[["size","large"],["slot","end"]],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.addPlaylist()&&e),e},f.B,f.d)),e.ob(7,49152,null,0,r.j,[e.h,e.k],{color:[0,"color"],fill:[1,"fill"],size:[2,"size"]},null),(n()(),e.pb(8,0,null,0,1,"fa-icon",[["class","ng-fa-icon"],["icon","plus"]],[[8,"innerHTML",1]],null,null,h.b,h.a)),e.ob(9,573440,null,0,b.a,[d.b,b.b],{iconProp:[0,"iconProp"]},null),(n()(),e.pb(10,0,null,null,4,"ion-content",[["padding-start",""]],null,null,null,f.G,f.i)),e.ob(11,49152,null,0,r.t,[e.h,e.k],null,null),(n()(),e.pb(12,0,null,0,2,"div",[["class","square-container"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,k)),e.ob(14,278528,null,0,p.i,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(n()(),e.pb(15,0,null,null,3,"ion-footer",[],null,null,null,f.H,f.j)),e.ob(16,49152,null,0,r.y,[e.h,e.k],null,null),(n()(),e.pb(17,0,null,0,1,"app-player",[],null,null,null,v.b,v.a)),e.ob(18,114688,null,0,y.a,[r.Hb,m.a],null,null)],function(n,t){var l=t.component;n(t,7,0,"light","clear","large"),n(t,9,0,"plus"),n(t,14,0,l.playlists),n(t,18,0)},function(n,t){n(t,8,0,e.zb(t,9).renderedIconHTML)})}function x(n){return e.Hb(0,[(n()(),e.pb(0,0,null,null,1,"app-dashboard",[],null,null,null,S,g)),e.ob(1,114688,null,0,u,[o.a,r.Gb],null,null)],function(n,t){n(t,1,0)},null)}var C=e.lb("app-dashboard",u,x,{},{},[]),P=l("gIcY"),O=l("BcDN");l.d(t,"DashboardPageModuleNgFactory",function(){return M});var M=e.mb(a,[],function(n){return e.wb([e.xb(512,e.j,e.bb,[[8,[c.a,C]],[3,e.j],e.x]),e.xb(4608,p.l,p.k,[e.u,[2,p.r]]),e.xb(4608,P.g,P.g,[]),e.xb(4608,r.b,r.b,[e.z,e.g]),e.xb(4608,r.Fb,r.Fb,[r.b,e.j,e.q]),e.xb(4608,r.Ib,r.Ib,[r.b,e.j,e.q]),e.xb(1073742336,p.b,p.b,[]),e.xb(1073742336,P.f,P.f,[]),e.xb(1073742336,P.a,P.a,[]),e.xb(1073742336,r.Cb,r.Cb,[]),e.xb(1073742336,b.f,b.f,[]),e.xb(1073742336,s.p,s.p,[[2,s.v],[2,s.m]]),e.xb(1073742336,O.a,O.a,[]),e.xb(1073742336,a,a,[]),e.xb(1024,s.k,function(){return[[{path:"",component:u}]]},[])])})},oKJH:function(n,t,l){"use strict";var e=l("CcnG"),i=l("oBZk"),o=l("ZZ/e"),r=l("ZYCi"),u=l("Ip0R"),a=l("fNgX"),c=l("Hf/j"),s=l("ZYjt"),p=l("gIcY");l("L7MN"),l("QIP1"),l.d(t,"a",function(){return f}),l.d(t,"b",function(){return b});var f=e.nb({encapsulation:0,styles:[["[_nghost-%COMP%]   ion-range[_ngcontent-%COMP%]{padding:0;height:4px}[_nghost-%COMP%]   .time-slider[_ngcontent-%COMP%]{--knob-size:0;--bar-height:4px;--bar-border-radius:2px;--bar-background:transparent}[_nghost-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-bottom:0}"]],data:{}});function h(n){return e.Hb(0,[(n()(),e.pb(0,0,null,null,24,"div",[],null,null,null,null,null)),(n()(),e.pb(1,0,null,null,19,"ion-toolbar",[["color","tertiary"]],null,null,null,i.V,i.x)),e.ob(2,49152,null,0,o.Ab,[e.h,e.k],{color:[0,"color"]},null),(n()(),e.pb(3,0,null,0,3,"div",[["no-margin",""],["slot","start"],["style","cursor: pointer;"]],null,[[null,"click"]],function(n,t,l){var i=!0;return"click"===t&&(i=!1!==e.zb(n,4).onClick()&&i),"click"===t&&(i=!1!==e.zb(n,5).onClick(l)&&i),i},null,null)),e.ob(4,16384,null,0,r.n,[r.m,r.a,[8,null],e.D,e.k],{routerLink:[0,"routerLink"]},null),e.ob(5,737280,null,0,o.Jb,[u.h,o.Gb,e.k,r.m,[2,r.n]],null,null),(n()(),e.pb(6,0,null,null,0,"img",[["height","50"]],[[8,"src",4]],null,null,null,null)),(n()(),e.pb(7,0,null,0,7,"ion-title",[["style","cursor: pointer;"],["text-left",""]],null,[[null,"click"]],function(n,t,l){var i=!0;return"click"===t&&(i=!1!==e.zb(n,9).onClick()&&i),"click"===t&&(i=!1!==e.zb(n,10).onClick(l)&&i),i},i.U,i.w)),e.ob(8,49152,null,0,o.yb,[e.h,e.k],null,null),e.ob(9,16384,null,0,r.n,[r.m,r.a,[8,null],e.D,e.k],{routerLink:[0,"routerLink"]},null),e.ob(10,737280,null,0,o.Jb,[u.h,o.Gb,e.k,r.m,[2,r.n]],null,null),(n()(),e.pb(11,0,null,0,1,"div",[],null,null,null,null,null)),(n()(),e.Fb(12,null,["",""])),(n()(),e.pb(13,0,null,0,1,"small",[],null,null,null,null,null)),(n()(),e.Fb(14,null,["",""])),(n()(),e.pb(15,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,i.C,i.e)),e.ob(16,49152,null,0,o.k,[e.h,e.k],null,null),(n()(),e.pb(17,0,null,0,3,"ion-button",[["padding-end",""],["shape","round"]],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.playerService.toggleState()&&e),e},i.B,i.d)),e.ob(18,49152,null,0,o.j,[e.h,e.k],{shape:[0,"shape"]},null),(n()(),e.pb(19,0,null,0,1,"fa-icon",[["class","ng-fa-icon"],["size","lg"],["slot","icon-only"]],[[8,"innerHTML",1]],null,null,a.b,a.a)),e.ob(20,573440,null,0,c.a,[s.b,c.b],{iconProp:[0,"iconProp"],size:[1,"size"]},null),(n()(),e.pb(21,0,null,null,3,"ion-range",[["class","time-slider"],["color","danger"],["min","0"]],null,[[null,"pointerup"],[null,"pointerdown"],[null,"contextmenu"],[null,"ionBlur"],[null,"ionChange"]],function(n,t,l){var i=!0,o=n.component;return"ionBlur"===t&&(i=!1!==e.zb(n,24)._handleBlurEvent()&&i),"ionChange"===t&&(i=!1!==e.zb(n,24)._handleChangeEvent(l.target.value)&&i),"pointerup"===t&&(i=!1!==(1===l.which?o.resume(l):l.preventDefault())&&i),"pointerdown"===t&&(i=!1!==(1===l.which?o.pause(l):l.preventDefault())&&i),"contextmenu"===t&&(i=!1!==l.preventDefault()&&i),i},i.M,i.o)),e.Cb(5120,null,p.b,function(n){return[n]},[o.Kb]),e.ob(23,49152,[[1,4],["timeSlider",4]],0,o.ab,[e.h,e.k],{color:[0,"color"],min:[1,"min"],max:[2,"max"],value:[3,"value"]},null),e.ob(24,16384,null,0,o.Kb,[e.k],null,null)],function(n,t){var l=t.component;n(t,2,0,"tertiary"),n(t,4,0,"/playlist/"+l.playerService.playlist.id),n(t,5,0),n(t,9,0,"/playlist/"+l.playerService.playlist.id),n(t,10,0),n(t,18,0,"round"),n(t,20,0,l.playerService.isState("Playing")?"pause":"play","lg"),n(t,23,0,"danger",0,l.playerService.totalTime().time+1e-18,l.playerService.currentTime().time)},function(n,t){var l=t.component;n(t,6,0,null!=l.playerService.file&&l.playerService.file.thumbnail?null==l.playerService.file?null:l.playerService.file.thumbnail:"https://via.placeholder.com/50"),n(t,12,0,l.playerService.file?l.playerService.file.title?l.playerService.file.title:l.playerService.file.filename:""),n(t,14,0,null!=l.playerService.file&&l.playerService.file.artist?l.playerService.file.artist:""),n(t,19,0,e.zb(t,20).renderedIconHTML)})}function b(n){return e.Hb(0,[e.Db(671088640,1,{timeSlider:0}),(n()(),e.gb(16777216,null,null,1,null,h)),e.ob(2,16384,null,0,u.j,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(n,t){n(t,2,0,t.component.playerService.file)},null)}}}]);