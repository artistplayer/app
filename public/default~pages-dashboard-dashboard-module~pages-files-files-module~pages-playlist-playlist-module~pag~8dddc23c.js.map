{"version":3,"sources":["./src/app/providers/api/entity.ts","./src/app/providers/api/query.ts","./src/app/providers/api/resource.ts","./src/app/services/api/file.service.ts","./src/app/services/api/playlist.service.ts","./src/app/services/api/stats.service.ts"],"names":[],"mappings":"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","file":"default~pages-dashboard-dashboard-module~pages-files-files-module~pages-playlist-playlist-module~pag~8dddc23c.js","sourcesContent":["import {Options, Resource} from './resource';\nimport {Query} from './query';\n\n\nexport class Entity<T> {\n    public id;\n    private _listeners: Entity<any>[] = [];\n    private _isFullyload = false;\n\n    constructor(private parent?: Resource<T>) {\n    }\n\n    addListener(listener?: Entity<T>) {\n        console.debug('Add listener: ' + listener.constructor.name);\n        this._listeners.push(listener);\n    }\n\n    validate(options?: Options) {\n        if (options.with.length !== options.with.filter(w => typeof w !== 'string' && this[w.name]).length) {\n            return false;\n        }\n        if (options.wheres.length !== options.wheres.filter((where) => Query.where(this, where)).length) {\n            return false;\n        }\n        if (options.full) {\n            return this._isFullyload;\n        }\n        return true;\n    }\n\n    update(data) {\n        return this.parent.call('patch', this.parent.location + '/' + this.id, {data: data}).then(response => {\n            return this.fill(response.data);\n        }).catch(error => {\n            console.log(error);\n        });\n    }\n\n    fill(data, options?: Options) {\n        const entity = Object.assign(this, data);\n        if (options) {\n            if (options.full) {\n                this._isFullyload = true;\n            }\n            options.with.forEach(relation => {\n                if (typeof relation !== 'string' && entity.hasOwnProperty(relation.name)) {\n                    entity[relation.name] = entity[relation.name].map(item => {\n                        const e = <Entity<T>>relation.findOrCreate(item);\n                        e.addListener(this);\n                        return e;\n                    });\n                }\n            });\n\n            if (options.sort && options.sort.indexOf('.') > -1) {\n                const kv = options.sort.split('.');\n                entity[kv[0]] = entity[kv[0]].sort((a, b) => this.parent.sort(a, b, kv[1], options.order));\n            }\n        }\n\n        return entity;\n    }\n\n    delete() {\n        return this.parent.call('delete', this.parent.location + '/' + this.id).then(() => {\n            this._listeners.forEach(listener => {\n                listener.cleanup(this.id, this.parent);\n                listener.parent.refresh();\n            });\n            this.parent.delete(this.id);\n            this.parent.refresh();\n        }).catch(error => {\n            console.log(error);\n        });\n    }\n\n    cleanup(id, relation: Resource<any>) {\n        if (this.hasOwnProperty(relation.name)) {\n            this[relation.name] = this[relation.name].filter(item => item.id !== id);\n        }\n    }\n\n    attach(entity: Entity<any>) {\n        const resource = entity.parent.name;\n        return this.parent.call('post', this.parent.location + '/' + this.id + '/' + resource, {data: {[resource]: [entity.id]}})\n            .then((r) => {\n                Object.keys(r.data).forEach((k) => {\n                    if (!Array.isArray(r.data[k])) {\n                        this[k] = r.data[k];\n                    }\n                });\n                if (!this[resource]) {\n                    this[resource] = [];\n                }\n\n                this[resource].push(entity);\n                entity.addListener(this);\n            });\n    }\n\n    detach(entity: Entity<any>) {\n        const resource = entity.parent.name;\n        return this.parent.call('delete', this.parent.location + '/' + this.id + '/' + resource + '/' + entity.id)\n            .then((r) => {\n                if (this[resource]) {\n\n                    Object.keys(r.data).forEach((k) => {\n                        if (!Array.isArray(r.data[k])) {\n                            this[k] = r.data[k];\n                        }\n                    });\n\n                    this[resource] = this[resource].filter(e => e.id !== entity.id);\n                    entity.addListener(this);\n                }\n            });\n    }\n\n    sync(relation: Resource<any>) {\n        return new Promise(resolve => {\n            if (this.hasOwnProperty(relation.name)) {\n                const data = this[relation.name].map((item, index) => {\n                    return {\n                        id: item.id,\n                        position: index + 1\n                    };\n                });\n                this.parent.call('put', this.parent.location + '/' + this.id + '/' + relation.name, {\n                    data: data\n                }).catch(error => {\n                    console.log(error);\n                });\n            }\n            resolve();\n        });\n    }\n}\n","export class Query {\n    static validOperators = [\n        'eq', 'neq', 'lt', 'gt', 'lte', 'gte', '!regexp', '!like',\n        '<', '>', '<=', '>=', '<>', '!=', '<=>', 'like', 'not like', 'regexp', 'not regexp'\n    ];\n\n    static mappings = {\n        eq: '=',\n        neq: '!=',\n        lt: '<',\n        gt: '>',\n        lte: '<=',\n        gte: '>=',\n        '!regexp': 'not regexp',\n        '!like': 'not like'\n    };\n\n\n    static where(object, where) {\n        const keys = Object.keys(where);\n        if (keys.length) {\n            return keys.filter(key => Query.operatorFilter(object[key], where[key])).length > 0;\n        }\n        return true;\n    }\n\n    static operatorFilter(data: any, value: any) {\n        let operator = '=';\n        if (typeof value === 'object') {\n            if (value[0]) {\n                const result = value.filter(v => {\n                    if (typeof v === 'object') {\n                        const op = Query.validOperator(v['operator']);\n                        const val = v['value'] ? v['value'] : null;\n                        if (val !== null) {\n                            return Query.matches(data, op, val);\n                        }\n                        return false;\n                    }\n                    return Query.matches(data, operator, v);\n                });\n                return result.length > 0;\n            }\n\n            if (value['operator']) {\n                operator = Query.validOperator(value['operator']);\n            }\n            value = value['value'];\n        }\n        return Query.matches(data, operator, value);\n    }\n\n    static matches(data, operator, value) {\n        if (typeof data === 'string') {\n            data = data.toLowerCase();\n        }\n        if (typeof value === 'string') {\n            value = value.toLowerCase();\n        }\n        if (value === 'undefined' || value === 'null') {\n            value = '';\n        }\n\n        switch (operator) {\n            case 'neq':\n            case '<>':\n            case '!=':\n                return data !== value;\n            case 'lt':\n            case '<':\n                return data < value;\n            case 'gt':\n            case '>':\n                return data > value;\n            case 'lte':\n            case '<=':\n                return data <= value;\n            case 'gte':\n            case '>=':\n                return data >= value;\n            case 'not like':\n            case '!like':\n                return !Query.like(data, value);\n            case 'like':\n                return Query.like(data, value);\n            case '!regexp':\n            case 'not regexp':\n                return !(new RegExp(value).test(data));\n            case 'regexp':\n                return (new RegExp(value).test(data));\n            case 'eq':\n            case '<=>':\n            default:\n                return data === value;\n        }\n    }\n\n    static validOperator(operator) {\n        if (Query.validOperators.indexOf(operator)) {\n            return Query.mapOperator(operator);\n        }\n        return '=';\n    }\n\n    static mapOperator(operator) {\n        if (Query.mappings[operator]) {\n            return Query.mappings[operator];\n        }\n        return operator;\n    }\n\n    static like(data, value) {\n        if (value.substr(0, 1) === '%' && value.substr(value.length - 1, 1) === '%') {\n            return (data.indexOf(Query.clear(value.substring(1, value.length - 1))) > -1);\n        }\n        if (value.substr(0, 1) === '%') {\n            return (data.indexOf(Query.clear(value.substring(1, value.length))) > 0);\n        }\n        if (value.substr(value.length - 1, 1) === '%') {\n            return (data.indexOf(Query.clear(value.substring(0, value.length - 1))) === 0);\n        }\n        return false;\n    }\n\n    static clear(value) {\n        if (value === 'undefined' || value === 'null') {\n            value = '';\n        }\n        return value;\n    }\n\n\n}\n","import {HttpClient} from '@angular/common/http';\nimport {Entity} from './entity';\nimport {Injectable} from '@angular/core';\nimport {BehaviorSubject, Subject, Subscription} from 'rxjs';\nimport {APP_CONFIG} from \"../../app-routing.module\";\n\nexport interface Where {\n    operator: string;\n    value: string | number | [];\n}\n\nexport type Wheres = { [key: string]: Where | string | number | [] } | null;\n\nexport enum Order {\n    ASC = 'ASC',\n    DESC = 'DESC'\n}\n\nexport interface Options {\n    sort?: string;\n    order?: Order;\n    limit?: number;\n    page?: number;\n    with?: (Resource<any> | string)[];\n    wheres?: { [key: string]: Where | string | number | string[] | number[] }[];\n    data?: any;\n    full?: boolean;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport abstract class Resource<T> {\n    public abstract name;\n    public abstract location;\n\n    private _options: Options;\n    private _searchWheres: Subject<Wheres[]> = new Subject();\n\n    private collection: BehaviorSubject<(T & Entity<T>)[]> = new BehaviorSubject([]);\n\n    // Fix this....\n    private subscriptions: Subscription[] = [];\n\n    constructor(public httpClient: HttpClient) {\n        this.reset();\n    }\n\n    where(where: { [key: string]: Where | string | number | string[] | number[] }) {\n        this._options.wheres.push(where);\n        return this;\n    }\n\n    with(relation: Resource<any> | string) {\n        this._options.with.push(relation);\n        return this;\n    }\n\n    find(id): Promise<T> {\n        const options = Object.assign({}, this._options, {full: true});\n        this.reset();\n\n        return new Promise((resolve, reject) => {\n            const item = this.collection.getValue().find(e => e.id === id);\n            if (item && item.validate(options)) {\n                return resolve(item);\n            }\n            this.call('get', this.location + '/' + id + this.params(options), options).then(response => {\n                return resolve(\n                    this.update([response.data], options).find(entity => entity.id === response.data.id)\n                );\n            }).catch(error => reject(error));\n        });\n    }\n\n    orderBy(sort: string, order: Order) {\n        this._options.sort = sort;\n        this._options.order = order;\n        return this;\n    }\n\n    limit(limit: number) {\n        this._options.limit = limit;\n        return this;\n    }\n\n    page(page: number) {\n        this._options.page = page;\n        return this;\n    }\n\n    search(wheres: Wheres[]) {\n        this._searchWheres.next(wheres);\n    }\n\n    subscribe(result: (result: (T & Entity<T>)[]) => void, error = (e) => console.debug(e)) {\n        const options = Object.assign({}, this._options);\n        this.reset();\n\n        let collection = [];\n        const render = () => {\n            const response = collection\n                .filter(entity => entity.validate(options))\n                .sort((a, b) => this.sort(a, b, options.sort, options.order))\n                .slice(0, options.limit);\n            result(response);\n            return response;\n        };\n\n        const subscriptions = [];\n        subscriptions.push(this.collection.subscribe(c => {\n            collection = c;\n            render();\n        }));\n        subscriptions.push(this._searchWheres.subscribe(wheres => {\n            Object.assign(options, {wheres: wheres});\n            if (render().length < options.limit) {\n                this.fetch(options).catch(e => error(e));\n            }\n        }));\n\n        if (this.collection.getValue().filter(entity => entity.validate(options)).length < options.limit) {\n            this.fetch(options).catch(e => error(e));\n        }\n\n        return Object.assign(this, {subscriptions: subscriptions});\n    }\n\n    unsubscribe() {\n        this.subscriptions.forEach(subscription => subscription.unsubscribe());\n    }\n\n    create(data): Promise<T & Entity<T>> {\n        const options = Object.assign({}, this._options);\n        this.reset();\n\n        return this.call('post', this.location, {data: data}).then(response => {\n            return this.update([response.data], options).find(entity => entity.id === response.data.id);\n        });\n    }\n\n    delete(id) {\n        this.collection.next(this.collection.getValue().filter(entity => entity.id !== id));\n    }\n\n    findOrCreate(data: T & Entity<T>) {\n        let item = this.collection.getValue().find(e => e.id === data.id);\n        if (item) {\n            return item.fill(data);\n        }\n        return this.update([data], null).find(entity => entity.id === data.id);\n    }\n\n    call(method, url, options?: Options) {\n        const requestOptions = {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        };\n\n        if (options && options.data) {\n            Object.keys(options.data).forEach(key => {\n                if (options.data[key] === '' || options.data[key] === null) {\n                    delete options.data[key];\n                }\n            });\n        }\n\n        switch (method) {\n            case 'get':\n            case 'delete':\n                return this.httpClient[method](APP_CONFIG.host + url, requestOptions).toPromise();\n            case 'post':\n            case 'put':\n            case 'patch':\n                return this.httpClient[method](APP_CONFIG.host + url, options.data, requestOptions).toPromise();\n        }\n    }\n\n    refresh() {\n        // console.log('Refresh: ' + this.constructor.name);\n    }\n\n    private fetch(options: Options) {\n        let call;\n        if (options.wheres.length > 0) {\n            options.data = {wheres: options.wheres};\n            call = this.call('post', this.location + '/search' + this.params(options), options);\n        } else {\n            call = this.call('get', this.location + this.params(options));\n        }\n        return call.then(response => {\n            this.update(response.data, options);\n        });\n    }\n\n    private reset() {\n        this._options = {\n            sort: 'id',\n            order: Order.ASC,\n            limit: 20,\n            page: 1,\n            with: [],\n            wheres: [],\n            full: false\n        };\n    }\n\n    private update(data: T[], options: Options) {\n        const collection = this.collection.getValue();\n        data.forEach((object: T & Entity<T>) => {\n            const exist = collection.find(item => item.id === object.id);\n            if (exist) {\n                exist.fill(object, options);\n            } else {\n                collection.push(<Entity<T> & T>(new Entity<T>(this)).fill(object, options));\n            }\n        });\n        this.collection.next(collection);\n        return collection;\n    }\n\n    private params(options?: Options) {\n        const params = [];\n        if (options.with.length) {\n            params['with'] = options.with.map(relation => typeof relation === 'string' ? relation : relation.name).join(',');\n        }\n\n        return '?' + Object.keys(params).filter(o => params[o] !== null).map(o => o + '=' + params[o]).join('&');\n    }\n\n    public sort(a, b, sort?: string, order?: Order) {\n        const valueA = a[sort];\n        const valueB = b[sort];\n\n        if (+valueA === +valueA) {\n            return order === Order.DESC ? valueB - valueA : valueA - valueB;\n        } else {\n            if (valueA.localeCompare(valueB) > 0) {\n                return order === Order.DESC ? -1 : 1;\n            } else if (valueA.localeCompare(valueB) < 0) {\n                return order === Order.DESC ? 1 : -1;\n            }\n        }\n    }\n\n}\n","import {Injectable} from '@angular/core';\nimport {Resource} from '../../providers/api/resource';\nimport {Entity} from '../../providers/api/entity';\n\nexport interface File extends Entity<File> {\n    id: number;\n    integrity_hash?: string;\n    title?: string;\n    artist?: string;\n    filesize?: number;\n    filename?: string;\n    filepath?: string;\n    url?: string;\n    format?: string;\n    thumbnail?: string;\n    mime_type?: string;\n    bitrate?: number;\n    playtime?: number;\n    created_at?: string;\n    updated_at?: string;\n    deleted_at?: string;\n    selected?: boolean;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class FileService extends Resource<File> {\n    public name = 'files';\n    public location = '/api/v1/files';\n}\n","import {Injectable} from '@angular/core';\nimport {File} from './file.service';\nimport {Resource} from '../../providers/api/resource';\nimport {Entity} from '../../providers/api/entity';\nimport {HttpClient} from '@angular/common/http';\nimport {AlertController} from '@ionic/angular';\n\nexport interface Playlist extends Entity<Playlist> {\n    id: number;\n    name?: string;\n    files?: Entity<File>[];\n    disabled: boolean;\n    playtime: number;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class PlaylistService extends Resource<Playlist> {\n    public name = 'playlists';\n    public location = '/api/v1/playlists';\n\n    constructor(public httpClient: HttpClient, private alertController: AlertController) {\n        super(httpClient);\n    }\n\n    create(): Promise<Playlist> {\n        return new Promise(async (resolve, reject) => {\n            const alert = await this.alertController.create({\n                header: 'New Playlist',\n                inputs: [\n                    {\n                        name: 'name',\n                        type: 'text',\n                        placeholder: 'Enter Playlist Name...',\n                        value: ''\n                    }\n                ],\n                buttons: [\n                    {\n                        text: 'Cancel',\n                        role: 'cancel'\n                    }, {\n                        text: 'Create',\n                        handler: (data) => {\n                            if (!data) {\n                                return;\n                            }\n                            super.create({name: data.name}).then(async (playlist: Playlist) => {\n                                resolve(playlist);\n                            }).catch(error => reject(error));\n                        }\n                    }\n                ]\n            });\n            await alert.present();\n        });\n\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {Resource} from '../../providers/api/resource';\nimport {File} from './file.service';\nimport {Entity} from '../../providers/api/entity';\n\nexport interface Stats extends Entity<Stats> {\n    id: string;\n    label?: string;\n    size: number;\n    location: string;\n    files: File[];\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class StatsService extends Resource<Stats> {\n    public name = 'stats';\n    public location = '/api/v1/stats';\n}\n"],"sourceRoot":"webpack:///"}