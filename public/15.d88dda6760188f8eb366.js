(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"9sDO":function(n,t,e){"use strict";e.d(t,"a",function(){return a});var l=e("mrSG"),i=e("Ovi0"),o=e("ZZ/e"),u=e("CcnG"),r=e("t/Na"),a=function(n){function t(t,e){var l=n.call(this,t)||this;return l.httpClient=t,l.alertController=e,l.name="playlists",l.location="/api/v1/playlists",l}return l.d(t,n),t.prototype.create=function(){var t=this;return new Promise(function(e,i){return l.b(t,void 0,void 0,function(){var t=this;return l.e(this,function(o){switch(o.label){case 0:return[4,this.alertController.create({header:"New Playlist",inputs:[{name:"name",type:"text",placeholder:"Enter Playlist Name...",value:""}],buttons:[{text:"Cancel",role:"cancel"},{text:"Create",handler:function(o){o&&n.prototype.create.call(t,{name:o.name}).then(function(n){return l.b(t,void 0,void 0,function(){return l.e(this,function(t){return e(n),[2]})})}).catch(function(n){return i(n)})}}]})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}})})})},t.ngInjectableDef=u.S({factory:function(){return new t(u.W(r.c),u.W(o.a))},token:t,providedIn:"root"}),t}(i.b)},BcDN:function(n,t,e){"use strict";e.d(t,"a",function(){return l});var l=function(){return function(){}}()},L7MN:function(n,t,e){"use strict";e.d(t,"a",function(){return l}),e("ZZ/e"),e("QIP1");var l=function(){function n(n,t){this.platform=n,this.playerService=t,this.playonResume=!1}return n.prototype.ngOnInit=function(){this.playerService.currentTime()},n.prototype.resume=function(n){var t=this;this.playerService.setCurrentTime(this.timeSlider.value),setTimeout(function(){t.playonResume&&(t.playonResume=!1,t.playerService.setState("Playing"))},500)},n.prototype.pause=function(n){this.playerService.totalTime().time<1&&n.preventDefault(),this.playonResume="Playing"===this.playerService.status,this.playonResume&&this.playerService.setState("Paused")},n}()},QIP1:function(n,t,e){"use strict";var l=e("gRba"),i=e("9sDO"),o=e("3n8g"),u=e("vY5A"),r=e("K9Ia"),a=e("CcnG"),s=function(){function n(){this.stream=new r.a,this.create()}return n.prototype.create=function(){var n=this;return new Promise(function(t){n.socket=new WebSocket(u.a.socket),n.socket.addEventListener("connect",function(n){t()}),n.socket.addEventListener("message",function(t){n.stream.next(JSON.parse(t.data))})})},n.prototype.on=function(n,t){return this.stream.subscribe(function(e){e.event===n&&t(e.data,e.sender?e.sender:null)}),this},n.prototype.subscribe=function(n,t){return this.stream.subscribe(function(e){e.channel===n&&t(e.data,e.sender?e.sender:null)}),this},n.prototype.publish=function(n,t){var e=this,l=function(){e.socket.send(JSON.stringify({channel:n,event:"message",data:t}))};this.socket.readyState===this.socket.CLOSED||this.socket.readyState===this.socket.CLOSING?this.create().then(function(){return l()}):l()},n.prototype.send=function(n){var t=this,e=function(){t.socket.send(JSON.stringify({event:"message",data:n}))};this.socket.readyState===this.socket.CLOSED||this.socket.readyState===this.socket.CLOSING?this.create().then(function(){e()}):e()},n.ngInjectableDef=a.S({factory:function(){return new n},token:n,providedIn:"root"}),n}();e.d(t,"a",function(){return c});var c=function(){function n(n,t,e,l){var i=this;this.fileService=n,this.playlistService=t,this.statsService=e,this.socketService=l,this.volume=100,this.muted=!1,this.mode="normal",this.status="Paused",this.position=0,this.socketService.subscribe("omx",function(n,t){Object.keys(n).forEach(function(t){i.hasOwnProperty(t)&&(i[t]=n[t]),!n.file||!n.file.id||i.file&&i.file.id===n.file.id||(i.file=n.file,i.fileService.find(n.file.id).then(function(n){return i.file=n})),!n.playlist||!n.playlist.id||i.playlist&&i.playlist.id===n.playlist.id||(i.playlist=n.playlist,i.playlistService.find(n.playlist.id).then(function(n){return i.playlist=n}))})})}return n.prototype.setSong=function(n,t){var e=this;this.fileService.find(n).then(function(n){return e.file=n}),this.playlistService.find(t).then(function(n){return e.playlist=n}),this.socketService.publish("omx",{file:n,playlist:t})},n.prototype.isSong=function(n,t){return!!this.file&&n===this.file.id&&(!t||this.isState(t))},n.prototype.totalTime=function(){return this.convertTime(this.file?this.file.playtime:0)},n.prototype.isPlaylist=function(n){var t=this.getPlaylist();return!!t&&t.id===n},n.prototype.getPlaylist=function(){return this.playlist},n.prototype.addToQueue=function(n,t){},n.prototype.next=function(){},n.prototype.prev=function(){},n.prototype.toggleState=function(){this.file&&(this.status="Playing"===this.status?"Paused":"Playing"),this.setState(this.status)},n.prototype.setState=function(n){this.socketService.publish("omx",{status:n})},n.prototype.isState=function(n){return this.status===n},n.prototype.isMode=function(n){return this.mode===n},n.prototype.toggleMode=function(){var n=["normal","repeat","single"],t=n.indexOf(this.mode)+1;t>n.length-1&&(t=0),this.mode=n[t],this.socketService.publish("omx",{mode:this.mode})},n.prototype.setVolume=function(n){this.volume=n,this.socketService.publish("omx",{volume:n})},n.prototype.getVolume=function(){return this.volume},n.prototype.toggleMute=function(){this.socketService.publish("omx",{muted:!this.muted})},n.prototype.isMuted=function(){return this.muted},n.prototype.currentTime=function(){return this.convertTime(this.position)},n.prototype.getTimecode=function(n,t){var e="current"===t?this.currentTime():this.totalTime();return Object.keys(e).forEach(function(t){n=n.replace("{"+t+"}",e[t])}),n},n.prototype.setCurrentTime=function(n){this.socketService.publish("omx",{position:n})},n.prototype.convertTime=function(n){var t={h:0,m:0,s:0,hh:null,mm:null,ss:null,i:0,time:n};return n>0&&(t.h=Math.floor(n/60/60),t.m=Math.floor(n/60-60*t.h),t.s=Math.round(n-60*t.m-60*t.h)),t.hh=(t.h.toString().length<2?"0":null)+t.h,t.mm=(t.m.toString().length<2?"0":null)+t.m,t.ss=(t.s.toString().length<2?"0":null)+t.s,t},n.ngInjectableDef=a.S({factory:function(){return new n(a.W(l.a),a.W(i.a),a.W(o.a),a.W(s))},token:n,providedIn:"root"}),n}()},gRba:function(n,t,e){"use strict";e.d(t,"a",function(){return r});var l=e("mrSG"),i=e("Ovi0"),o=e("CcnG"),u=e("t/Na"),r=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.name="files",t.location="/api/v1/files",t}return l.d(t,n),t.ngInjectableDef=o.S({factory:function(){return new t(o.W(u.c))},token:t,providedIn:"root"}),t}(i.b)},mhqm:function(n,t,e){"use strict";e.r(t);var l=e("CcnG"),i=e("mrSG"),o=e("9sDO"),u=e("ZZ/e"),r=function(){function n(n,t){this.playlistService=n,this.navController=t}return n.prototype.ngOnInit=function(){var n=this;this.playlistService.subscribe(function(t){return n.playlists=t})},n.prototype.addPlaylist=function(){return i.b(this,void 0,void 0,function(){var n=this;return i.e(this,function(t){return this.playlistService.create().then(function(t){n.navController.navigateForward("/playlist/"+t.id)}),[2]})})},n}(),a=function(){return function(){}}(),s=e("pMnS"),c=e("ZYCi"),p=e("Ip0R"),f=e("oBZk"),h=e("fNgX"),b=e("Hf/j"),d=e("ZYjt"),v=e("oKJH"),m=e("L7MN"),y=e("QIP1"),g=l.nb({encapsulation:0,styles:[["[_nghost-%COMP%]   .square-container[_ngcontent-%COMP%]{padding:8px;max-width:1200px;margin:0 auto}[_nghost-%COMP%]   .square[_ngcontent-%COMP%]{cursor:pointer;width:calc(100% / 2);float:left;position:relative;padding-bottom:calc(100% / 2.5)}@media screen and (min-width:768px){[_nghost-%COMP%]   .square[_ngcontent-%COMP%]{width:calc(100% / 4);padding-bottom:calc(100% / 5)}}[_nghost-%COMP%]   .square[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:calc(100% - 16px);height:calc(100% - 16px);position:absolute;padding-top:calc(100% / 2.5 - 24px);font-size:24px;color:#fff;border-radius:20px;text-align:center}"]],data:{}});function S(n){return l.Hb(0,[(n()(),l.pb(0,0,null,null,7,"div",[["class","square"],["routerLinkActive","active"]],[[1,"data-index",0]],[[null,"click"]],function(n,t,e){var i=!0;return"click"===t&&(i=!1!==l.zb(n,1).onClick()&&i),"click"===t&&(i=!1!==l.zb(n,2).onClick(e)&&i),i},null,null)),l.ob(1,16384,[[1,4]],0,c.n,[c.m,c.a,[8,null],l.D,l.k],{routerLink:[0,"routerLink"]},null),l.ob(2,737280,null,0,u.Jb,[p.h,u.Gb,l.k,c.m,[2,c.n]],null,null),l.ob(3,1720320,null,2,c.o,[c.m,l.k,l.D,l.h],{routerLinkActive:[0,"routerLinkActive"]},null),l.Db(603979776,1,{links:1}),l.Db(603979776,2,{linksWithHrefs:1}),(n()(),l.pb(6,0,null,null,1,"div",[["class","content"]],null,null,null,null,null)),(n()(),l.Fb(7,null,[" "," "]))],function(n,t){n(t,1,0,"/playlist/"+t.context.$implicit.id),n(t,2,0),n(t,3,0,"active")},function(n,t){n(t,0,0,t.context.index),n(t,7,0,t.context.$implicit.name)})}function k(n){return l.Hb(0,[(n()(),l.pb(0,0,null,null,9,"ion-header",[],null,null,null,f.I,f.k)),l.ob(1,49152,null,0,u.A,[l.h,l.k],null,null),(n()(),l.pb(2,0,null,0,7,"ion-toolbar",[["padding-top",""],["text-left",""]],null,null,null,f.V,f.x)),l.ob(3,49152,null,0,u.Ab,[l.h,l.k],null,null),(n()(),l.pb(4,0,null,0,1,"div",[["padding-start",""]],null,null,null,null,null)),(n()(),l.Fb(-1,null,[" Playlists "])),(n()(),l.pb(6,0,null,0,3,"ion-button",[["size","large"],["slot","end"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.addPlaylist()&&l),l},f.B,f.d)),l.ob(7,49152,null,0,u.j,[l.h,l.k],{color:[0,"color"],fill:[1,"fill"],size:[2,"size"]},null),(n()(),l.pb(8,0,null,0,1,"fa-icon",[["class","ng-fa-icon"],["icon","plus"]],[[8,"innerHTML",1]],null,null,h.b,h.a)),l.ob(9,573440,null,0,b.a,[d.b,b.b],{iconProp:[0,"iconProp"]},null),(n()(),l.pb(10,0,null,null,4,"ion-content",[["padding-start",""]],null,null,null,f.G,f.i)),l.ob(11,49152,null,0,u.t,[l.h,l.k],null,null),(n()(),l.pb(12,0,null,0,2,"div",[["class","square-container"]],null,null,null,null,null)),(n()(),l.gb(16777216,null,null,1,null,S)),l.ob(14,278528,null,0,p.i,[l.O,l.L,l.s],{ngForOf:[0,"ngForOf"]},null),(n()(),l.pb(15,0,null,null,3,"ion-footer",[],null,null,null,f.H,f.j)),l.ob(16,49152,null,0,u.y,[l.h,l.k],null,null),(n()(),l.pb(17,0,null,0,1,"app-player",[],null,null,null,v.b,v.a)),l.ob(18,114688,null,0,m.a,[u.Hb,y.a],null,null)],function(n,t){var e=t.component;n(t,7,0,"light","clear","large"),n(t,9,0,"plus"),n(t,14,0,e.playlists),n(t,18,0)},function(n,t){n(t,8,0,l.zb(t,9).renderedIconHTML)})}function x(n){return l.Hb(0,[(n()(),l.pb(0,0,null,null,1,"app-dashboard",[],null,null,null,k,g)),l.ob(1,114688,null,0,r,[o.a,u.Gb],null,null)],function(n,t){n(t,1,0)},null)}var C=l.lb("app-dashboard",r,x,{},{},[]),P=e("gIcY"),O=e("BcDN");e.d(t,"DashboardPageModuleNgFactory",function(){return M});var M=l.mb(a,[],function(n){return l.wb([l.xb(512,l.j,l.bb,[[8,[s.a,C]],[3,l.j],l.x]),l.xb(4608,p.l,p.k,[l.u,[2,p.r]]),l.xb(4608,P.g,P.g,[]),l.xb(4608,u.b,u.b,[l.z,l.g]),l.xb(4608,u.Fb,u.Fb,[u.b,l.j,l.q]),l.xb(4608,u.Ib,u.Ib,[u.b,l.j,l.q]),l.xb(1073742336,p.b,p.b,[]),l.xb(1073742336,P.f,P.f,[]),l.xb(1073742336,P.a,P.a,[]),l.xb(1073742336,u.Cb,u.Cb,[]),l.xb(1073742336,b.f,b.f,[]),l.xb(1073742336,c.p,c.p,[[2,c.v],[2,c.m]]),l.xb(1073742336,O.a,O.a,[]),l.xb(1073742336,a,a,[]),l.xb(1024,c.k,function(){return[[{path:"",component:r}]]},[])])})},oKJH:function(n,t,e){"use strict";var l=e("CcnG"),i=e("oBZk"),o=e("ZZ/e"),u=e("fNgX"),r=e("Hf/j"),a=e("ZYjt"),s=e("gIcY"),c=e("Ip0R");e("L7MN"),e("QIP1"),e.d(t,"a",function(){return p}),e.d(t,"b",function(){return h});var p=l.nb({encapsulation:0,styles:[["[_nghost-%COMP%]   ion-range[_ngcontent-%COMP%]{padding:0;height:4px}[_nghost-%COMP%]   .time-slider[_ngcontent-%COMP%]{--knob-size:0;--bar-height:4px;--bar-border-radius:2px;--bar-background:transparent}[_nghost-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-bottom:0}"]],data:{}});function f(n){return l.Hb(0,[(n()(),l.pb(0,0,null,null,20,"div",[],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,15,"ion-toolbar",[["color","tertiary"]],null,null,null,i.V,i.x)),l.ob(2,49152,null,0,o.Ab,[l.h,l.k],{color:[0,"color"]},null),(n()(),l.pb(3,0,null,0,1,"div",[["no-margin",""],["slot","start"]],null,null,null,null,null)),(n()(),l.pb(4,0,null,null,0,"img",[["height","50"]],[[8,"src",4]],null,null,null,null)),(n()(),l.pb(5,0,null,0,5,"ion-title",[["text-left",""]],null,null,null,i.U,i.w)),l.ob(6,49152,null,0,o.yb,[l.h,l.k],null,null),(n()(),l.pb(7,0,null,0,1,"div",[],null,null,null,null,null)),(n()(),l.Fb(8,null,["",""])),(n()(),l.pb(9,0,null,0,1,"small",[],null,null,null,null,null)),(n()(),l.Fb(10,null,["",""])),(n()(),l.pb(11,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,i.C,i.e)),l.ob(12,49152,null,0,o.k,[l.h,l.k],null,null),(n()(),l.pb(13,0,null,0,3,"ion-button",[["padding-end",""],["shape","round"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.playerService.toggleState()&&l),l},i.B,i.d)),l.ob(14,49152,null,0,o.j,[l.h,l.k],{shape:[0,"shape"]},null),(n()(),l.pb(15,0,null,0,1,"fa-icon",[["class","ng-fa-icon"],["size","lg"],["slot","icon-only"]],[[8,"innerHTML",1]],null,null,u.b,u.a)),l.ob(16,573440,null,0,r.a,[a.b,r.b],{iconProp:[0,"iconProp"],size:[1,"size"]},null),(n()(),l.pb(17,0,null,null,3,"ion-range",[["class","time-slider"],["color","danger"],["min","0"]],null,[[null,"pointerup"],[null,"pointerdown"],[null,"contextmenu"],[null,"ionBlur"],[null,"ionChange"]],function(n,t,e){var i=!0,o=n.component;return"ionBlur"===t&&(i=!1!==l.zb(n,20)._handleBlurEvent()&&i),"ionChange"===t&&(i=!1!==l.zb(n,20)._handleChangeEvent(e.target.value)&&i),"pointerup"===t&&(i=!1!==(1===e.which?o.resume(e):e.preventDefault())&&i),"pointerdown"===t&&(i=!1!==(1===e.which?o.pause(e):e.preventDefault())&&i),"contextmenu"===t&&(i=!1!==e.preventDefault()&&i),i},i.M,i.o)),l.Cb(5120,null,s.b,function(n){return[n]},[o.Kb]),l.ob(19,49152,[[1,4],["timeSlider",4]],0,o.ab,[l.h,l.k],{color:[0,"color"],min:[1,"min"],max:[2,"max"],value:[3,"value"]},null),l.ob(20,16384,null,0,o.Kb,[l.k],null,null)],function(n,t){var e=t.component;n(t,2,0,"tertiary"),n(t,14,0,"round"),n(t,16,0,e.playerService.isState("Playing")?"pause":"play","lg"),n(t,19,0,"danger",0,e.playerService.totalTime().time+1e-18,e.playerService.currentTime().time)},function(n,t){var e=t.component;n(t,4,0,null!=e.playerService.file&&e.playerService.file.thumbnail?null==e.playerService.file?null:e.playerService.file.thumbnail:"https://via.placeholder.com/50"),n(t,8,0,e.playerService.file?e.playerService.file.title?e.playerService.file.title:e.playerService.file.filename:""),n(t,10,0,null!=e.playerService.file&&e.playerService.file.artist?e.playerService.file.artist:""),n(t,15,0,l.zb(t,16).renderedIconHTML)})}function h(n){return l.Hb(0,[l.Db(671088640,1,{timeSlider:0}),(n()(),l.gb(16777216,null,null,1,null,f)),l.ob(2,16384,null,0,c.j,[l.O,l.L],{ngIf:[0,"ngIf"]},null)],function(n,t){n(t,2,0,t.component.playerService.file)},null)}}}]);