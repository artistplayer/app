(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"3n8g":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("mrSG"),r=n("Ovi0"),o=n("CcnG"),l=n("t/Na"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="stats",e.location="/api/v1/stats",e}return i.__extends(e,t),e.ngInjectableDef=o.Zb({factory:function(){return new e(o.ac(l.c))},token:e,providedIn:"root"}),e}(r.b)},"9sDO":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("mrSG"),r=n("Ovi0"),o=n("ZZ/e"),l=n("CcnG"),a=n("t/Na"),u=function(t){function e(e,n){var i=t.call(this,e)||this;return i.httpClient=e,i.alertController=n,i.name="playlists",i.location="/api/v1/playlists",i}return i.__extends(e,t),e.prototype.create=function(){var e=this;return new Promise((function(n,r){return i.__awaiter(e,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(o){switch(o.label){case 0:return[4,this.alertController.create({header:"New Playlist",inputs:[{name:"name",type:"text",placeholder:"Enter Playlist Name...",value:""}],buttons:[{text:"Cancel",role:"cancel"},{text:"Create",handler:function(o){o&&t.prototype.create.call(e,{name:o.name}).then((function(t){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){return n(t),[2]}))}))})).catch((function(t){return r(t)}))}}]})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}}))}))}))},e.ngInjectableDef=l.Zb({factory:function(){return new e(l.ac(a.c),l.ac(o.a))},token:e,providedIn:"root"}),e}(r.b)},BcDN:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){return function(){}}()},L7MN:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n("ZZ/e"),n("QIP1");var i=function(){function t(t,e){this.platform=t,this.playerService=e,this.playonResume=!1}return t.prototype.ngOnInit=function(){this.playerService.currentTime()},t.prototype.resume=function(t){this.playerService.setCurrentTime(this.timeSlider.value)},t.prototype.pause=function(t){this.playerService.totalTime().time<1&&t.preventDefault()},t.prototype.openPlaylist=function(t){},t}()},Ovi0:function(t,e,n){"use strict";var i=function(){function t(){}return t.where=function(e,n){var i=Object.keys(n);return!i.length||i.filter((function(i){return t.operatorFilter(e[i],n[i])})).length>0},t.operatorFilter=function(e,n){var i="=";if("object"==typeof n){if(n[0])return n.filter((function(n){if("object"==typeof n){var r=t.validOperator(n.operator),o=n.value?n.value:null;return null!==o&&t.matches(e,r,o)}return t.matches(e,i,n)})).length>0;n.operator&&(i=t.validOperator(n.operator)),n=n.value}return t.matches(e,i,n)},t.matches=function(e,n,i){switch("string"==typeof e&&(e=e.toLowerCase()),"string"==typeof i&&(i=i.toLowerCase()),"undefined"!==i&&"null"!==i||(i=""),n){case"neq":case"<>":case"!=":return e!==i;case"lt":case"<":return e<i;case"gt":case">":return e>i;case"lte":case"<=":return e<=i;case"gte":case">=":return e>=i;case"not like":case"!like":return!t.like(e,i);case"like":return t.like(e,i);case"!regexp":case"not regexp":return!new RegExp(i).test(e);case"regexp":return new RegExp(i).test(e);case"eq":case"<=>":default:return e===i}},t.validOperator=function(e){return t.validOperators.indexOf(e)?t.mapOperator(e):"="},t.mapOperator=function(e){return t.mappings[e]?t.mappings[e]:e},t.like=function(e,n){return"%"===n.substr(0,1)&&"%"===n.substr(n.length-1,1)?e.indexOf(t.clear(n.substring(1,n.length-1)))>-1:"%"===n.substr(0,1)?e.indexOf(t.clear(n.substring(1,n.length)))>0:"%"===n.substr(n.length-1,1)&&0===e.indexOf(t.clear(n.substring(0,n.length-1)))},t.clear=function(t){return"undefined"!==t&&"null"!==t||(t=""),t},t.validOperators=["eq","neq","lt","gt","lte","gte","!regexp","!like","<",">","<=",">=","<>","!=","<=>","like","not like","regexp","not regexp"],t.mappings={eq:"=",neq:"!=",lt:"<",gt:">",lte:"<=",gte:">=","!regexp":"not regexp","!like":"not like"},t}(),r=function(){function t(t){this.parent=t,this._listeners=[],this._isFullyload=!1}return t.prototype.addListener=function(t){console.debug("Add listener: "+t.constructor.name),this._listeners.push(t)},t.prototype.validate=function(t){var e=this;return t.with.length===t.with.filter((function(t){return"string"!=typeof t&&e[t.name]})).length&&t.wheres.length===t.wheres.filter((function(t){return i.where(e,t)})).length&&(!t.full||this._isFullyload)},t.prototype.update=function(t){var e=this;return this.parent.call("patch",this.parent.location+"/"+this.id,{data:t}).then((function(t){return e.fill(t.data)})).catch((function(t){console.log(t)}))},t.prototype.fill=function(t,e){var n=this,i=Object.assign(this,t);if(e&&(e.full&&(this._isFullyload=!0),e.with.forEach((function(t){"string"!=typeof t&&i.hasOwnProperty(t.name)&&(i[t.name]=i[t.name].map((function(e){var i=t.findOrCreate(e);return i.addListener(n),i})))})),e.sort&&e.sort.indexOf(".")>-1)){var r=e.sort.split(".");i[r[0]]=i[r[0]].sort((function(t,i){return n.parent.sort(t,i,r[1],e.order)}))}return i},t.prototype.delete=function(){var t=this;return this.parent.call("delete",this.parent.location+"/"+this.id).then((function(){t._listeners.forEach((function(e){e.cleanup(t.id,t.parent),e.parent.refresh()})),t.parent.delete(t.id),t.parent.refresh()})).catch((function(t){console.log(t)}))},t.prototype.cleanup=function(t,e){this.hasOwnProperty(e.name)&&(this[e.name]=this[e.name].filter((function(e){return e.id!==t})))},t.prototype.attach=function(t){var e,n=this,i=t.parent.name;return this.parent.call("post",this.parent.location+"/"+this.id+"/"+i,{data:(e={},e[i]=[t.id],e)}).then((function(e){Object.keys(e.data).forEach((function(t){Array.isArray(e.data[t])||(n[t]=e.data[t])})),n[i]||(n[i]=[]),n[i].push(t),t.addListener(n)}))},t.prototype.detach=function(t){var e=this,n=t.parent.name;return this.parent.call("delete",this.parent.location+"/"+this.id+"/"+n+"/"+t.id).then((function(i){e[n]&&(Object.keys(i.data).forEach((function(t){Array.isArray(i.data[t])||(e[t]=i.data[t])})),e[n]=e[n].filter((function(e){return e.id!==t.id})),t.addListener(e))}))},t.prototype.sync=function(t){var e=this;return new Promise((function(n){if(e.hasOwnProperty(t.name)){var i=e[t.name].map((function(t,e){return{id:t.id,position:e+1}}));e.parent.call("put",e.parent.location+"/"+e.id+"/"+t.name,{data:i}).catch((function(t){console.log(t)}))}n()}))},t}(),o=n("K9Ia"),l=n("26FU"),a=n("vY5A"),u=n("CcnG"),s=n("t/Na");n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return p}));var c=function(t){return t.ASC="ASC",t.DESC="DESC",t}({}),p=function(){function t(t){this.httpClient=t,this._searchWheres=new o.a,this.collection=new l.a([]),this.subscriptions=[],this.reset()}return t.prototype.where=function(t){return this._options.wheres.push(t),this},t.prototype.with=function(t){return this._options.with.push(t),this},t.prototype.find=function(t){var e=this,n=Object.assign({},this._options,{full:!0});return this.reset(),new Promise((function(i,r){var o=e.collection.getValue().find((function(e){return e.id===t}));if(o&&o.validate(n))return i(o);e.call("get",e.location+"/"+t+e.params(n),n).then((function(t){return i(e.update([t.data],n).find((function(e){return e.id===t.data.id})))})).catch((function(t){return r(t)}))}))},t.prototype.orderBy=function(t,e){return this._options.sort=t,this._options.order=e,this},t.prototype.limit=function(t){return this._options.limit=t,this},t.prototype.page=function(t){return this._options.page=t,this},t.prototype.search=function(t){this._searchWheres.next(t)},t.prototype.subscribe=function(t,e){var n=this;void 0===e&&(e=function(t){return console.debug(t)});var i=Object.assign({},this._options);this.reset();var r=[],o=function(){var e=r.filter((function(t){return t.validate(i)})).sort((function(t,e){return n.sort(t,e,i.sort,i.order)})).slice(0,i.limit);return t(e),e},l=[];return l.push(this.collection.subscribe((function(t){r=t,o()}))),l.push(this._searchWheres.subscribe((function(t){Object.assign(i,{wheres:t}),o().length<i.limit&&n.fetch(i).catch((function(t){return e(t)}))}))),this.collection.getValue().filter((function(t){return t.validate(i)})).length<i.limit&&this.fetch(i).catch((function(t){return e(t)})),Object.assign(this,{subscriptions:l})},t.prototype.unsubscribe=function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))},t.prototype.create=function(t){var e=this,n=Object.assign({},this._options);return this.reset(),this.call("post",this.location,{data:t}).then((function(t){return e.update([t.data],n).find((function(e){return e.id===t.data.id}))}))},t.prototype.delete=function(t){this.collection.next(this.collection.getValue().filter((function(e){return e.id!==t})))},t.prototype.findOrCreate=function(t){var e=this.collection.getValue().find((function(e){return e.id===t.id}));return e?e.fill(t):this.update([t],null).find((function(e){return e.id===t.id}))},t.prototype.call=function(t,e,n){var i={headers:{Accept:"application/json","Content-Type":"application/json"}};switch(n&&n.data&&Object.keys(n.data).forEach((function(t){""!==n.data[t]&&null!==n.data[t]||delete n.data[t]})),t){case"get":case"delete":return this.httpClient[t](a.a.host+e,i).toPromise();case"post":case"put":case"patch":return this.httpClient[t](a.a.host+e,n.data,i).toPromise()}},t.prototype.refresh=function(){},t.prototype.fetch=function(t){var e,n=this;return t.wheres.length>0?(t.data={wheres:t.wheres},e=this.call("post",this.location+"/search"+this.params(t),t)):e=this.call("get",this.location+this.params(t)),e.then((function(e){n.update(e.data,t)}))},t.prototype.reset=function(){this._options={sort:"id",order:c.ASC,limit:20,page:1,with:[],wheres:[],full:!1}},t.prototype.update=function(t,e){var n=this,i=this.collection.getValue();return t.forEach((function(t){var o=i.find((function(e){return e.id===t.id}));o?o.fill(t,e):i.push(new r(n).fill(t,e))})),this.collection.next(i),i},t.prototype.params=function(t){var e=[];return t.with.length&&(e.with=t.with.map((function(t){return"string"==typeof t?t:t.name})).join(",")),"?"+Object.keys(e).filter((function(t){return null!==e[t]})).map((function(t){return t+"="+e[t]})).join("&")},t.prototype.sort=function(t,e,n,i){var r=t[n],o=e[n];return+r==+r?i===c.DESC?o-r:r-o:r.localeCompare(o)>0?i===c.DESC?-1:1:r.localeCompare(o)<0?i===c.DESC?1:-1:void 0},t.ngInjectableDef=u.Zb({factory:function(){return new t(u.ac(s.c))},token:t,providedIn:"root"}),t}()},QIP1:function(t,e,n){"use strict";var i=n("gRba"),r=n("9sDO"),o=n("3n8g"),l=n("vY5A"),a=n("K9Ia"),u=n("CcnG"),s=function(){function t(){this.stream=new a.a,this.create()}return t.prototype.create=function(){var t=this;return new Promise((function(e){t.socket=new WebSocket(l.a.socket),t.socket.addEventListener("connect",(function(t){e()})),t.socket.addEventListener("message",(function(e){t.stream.next(JSON.parse(e.data))}))}))},t.prototype.on=function(t,e){return this.stream.subscribe((function(n){n.event===t&&e(n.data,n.sender?n.sender:null)})),this},t.prototype.subscribe=function(t,e){return this.stream.subscribe((function(n){n.channel===t&&e(n.data,n.sender?n.sender:null)})),this},t.prototype.publish=function(t,e){var n=this,i=function(){n.socket.send(JSON.stringify({channel:t,event:"message",data:e}))};this.socket.readyState===this.socket.CLOSED||this.socket.readyState===this.socket.CLOSING?this.create().then((function(){return i()})):i()},t.prototype.send=function(t){var e=this,n=function(){e.socket.send(JSON.stringify({event:"message",data:t}))};this.socket.readyState===this.socket.CLOSED||this.socket.readyState===this.socket.CLOSING?this.create().then((function(){n()})):n()},t.ngInjectableDef=u.Zb({factory:function(){return new t},token:t,providedIn:"root"}),t}();n.d(e,"a",(function(){return c}));var c=function(){function t(t,e,n,i){var r=this;this.fileService=t,this.playlistService=e,this.statsService=n,this.socketService=i,this.status="Paused",this.position=0,this.socketService.subscribe("mplayer",(function(t,e){Object.keys(t).forEach((function(e){r.hasOwnProperty(e)&&(r[e]=t[e]),!t.file||!t.file.id||r.file&&r.file.id===t.file.id||(r.file=t.file,r.fileService.find(t.file.id).then((function(t){return r.file=t}))),!t.playlist||!t.playlist.id||r.playlist&&r.playlist.id===t.playlist.id||(r.playlist=t.playlist,r.playlistService.find(t.playlist.id).then((function(t){return r.playlist=t})))}))}))}return t.prototype.setSong=function(t,e){var n=this;this.fileService.find(t).then((function(t){return n.file=t})),e&&this.playlistService.find(e).then((function(t){return n.playlist=t})),this.socketService.publish("mplayer",{file:t,playlist:e})},t.prototype.isSong=function(t,e){return!!this.file&&t===this.file.id&&(!e||this.isState(e))},t.prototype.totalTime=function(){return this.convertTime(this.file?this.file.playtime:0)},t.prototype.isPlaylist=function(t){var e=this.getPlaylist();return!!e&&e.id===t},t.prototype.getPlaylist=function(){return this.playlist},t.prototype.toggleState=function(){this.file&&(this.status="Playing"===this.status?"Paused":"Playing"),this.setState(this.status)},t.prototype.setState=function(t){this.socketService.publish("mplayer",{status:t})},t.prototype.isState=function(t){return this.status===t},t.prototype.currentTime=function(){return this.convertTime(this.position)},t.prototype.getTimecode=function(t,e){var n="current"===e?this.currentTime():this.totalTime();return Object.keys(n).forEach((function(e){t=t.replace("{"+e+"}",n[e])})),t},t.prototype.setCurrentTime=function(t){this.socketService.publish("mplayer",{position:t})},t.prototype.convertTime=function(t){var e={h:0,m:0,s:0,hh:null,mm:null,ss:null,i:0,time:t};return t>0&&(e.h=Math.floor(t/60/60),e.m=Math.floor(t/60-60*e.h),e.s=Math.round(t-60*e.m-60*e.h)),e.hh=(e.h.toString().length<2?"0":null)+e.h,e.mm=(e.m.toString().length<2?"0":null)+e.m,e.ss=(e.s.toString().length<2?"0":null)+e.s,e},t.ngInjectableDef=u.Zb({factory:function(){return new t(u.ac(i.a),u.ac(r.a),u.ac(o.a),u.ac(s))},token:t,providedIn:"root"}),t}()},gRba:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("mrSG"),r=n("Ovi0"),o=n("CcnG"),l=n("t/Na"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="files",e.location="/api/v1/files",e}return i.__extends(e,t),e.ngInjectableDef=o.Zb({factory:function(){return new e(o.ac(l.c))},token:e,providedIn:"root"}),e}(r.b)},oKJH:function(t,e,n){"use strict";var i=n("CcnG"),r=n("oBZk"),o=n("ZZ/e"),l=n("ZYCi"),a=n("Ip0R"),u=n("fNgX"),s=n("Hf/j"),c=n("ZYjt"),p=n("gIcY");n("L7MN"),n("QIP1"),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return d}));var f=i.zb({encapsulation:0,styles:[["[_nghost-%COMP%]   ion-range[_ngcontent-%COMP%]{padding:0;height:4px}[_nghost-%COMP%]   .time-slider[_ngcontent-%COMP%]{--knob-size:0;--bar-height:4px;--bar-border-radius:2px;--bar-background:transparent}[_nghost-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-bottom:0}"]],data:{}});function h(t){return i.Vb(0,[(t()(),i.Bb(0,0,null,null,24,"div",[],null,null,null,null,null)),(t()(),i.Bb(1,0,null,null,19,"ion-toolbar",[["class","ion-padding"],["color","tertiary"]],null,null,null,r.X,r.y)),i.Ab(2,49152,null,0,o.Cb,[i.j,i.p,i.F],{color:[0,"color"]},null),(t()(),i.Bb(3,0,null,0,3,"div",[["class","ion-no-margin"],["slot","start"],["style","cursor: pointer;"],["tappable",""]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i.Nb(t,4).onClick()&&r),"click"===e&&(r=!1!==i.Nb(t,5).onClick(n)&&r),r}),null,null)),i.Ab(4,16384,null,0,l.n,[l.m,l.a,[8,null],i.K,i.p],{routerLink:[0,"routerLink"]},null),i.Ab(5,737280,null,0,o.Lb,[a.h,o.Ib,i.p,l.m,[2,l.n]],null,null),(t()(),i.Bb(6,0,null,null,0,"img",[["height","50"]],[[8,"src",4]],null,null,null,null)),(t()(),i.Bb(7,0,null,0,7,"ion-title",[["class","ion-text-left"],["style","cursor: pointer;"],["tappable",""]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i.Nb(t,9).onClick()&&r),"click"===e&&(r=!1!==i.Nb(t,10).onClick(n)&&r),r}),r.W,r.x)),i.Ab(8,49152,null,0,o.Ab,[i.j,i.p,i.F],null,null),i.Ab(9,16384,null,0,l.n,[l.m,l.a,[8,null],i.K,i.p],{routerLink:[0,"routerLink"]},null),i.Ab(10,737280,null,0,o.Lb,[a.h,o.Ib,i.p,l.m,[2,l.n]],null,null),(t()(),i.Bb(11,0,null,0,1,"div",[],null,null,null,null,null)),(t()(),i.Tb(12,null,["",""])),(t()(),i.Bb(13,0,null,0,1,"small",[],null,null,null,null,null)),(t()(),i.Tb(14,null,["",""])),(t()(),i.Bb(15,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,r.D,r.e)),i.Ab(16,49152,null,0,o.l,[i.j,i.p,i.F],null,null),(t()(),i.Bb(17,0,null,0,3,"ion-button",[["class","ion-padding-end"],["shape","round"],["tappable",""]],null,[[null,"tap"]],(function(t,e,n){var i=!0;return"tap"===e&&(i=!1!==t.component.playerService.toggleState()&&i),i}),r.C,r.d)),i.Ab(18,49152,null,0,o.k,[i.j,i.p,i.F],{shape:[0,"shape"]},null),(t()(),i.Bb(19,0,null,0,1,"fa-icon",[["class","ng-fa-icon"],["size","lg"],["slot","icon-only"]],[[8,"innerHTML",1]],null,null,u.b,u.a)),i.Ab(20,573440,null,0,s.a,[c.b,s.b],{iconProp:[0,"iconProp"],size:[1,"size"]},null),(t()(),i.Bb(21,0,null,null,3,"ion-range",[["class","time-slider"],["color","danger"],["min","0"]],null,[[null,"pointerup"],[null,"pointerdown"],[null,"contextmenu"],[null,"ionBlur"],[null,"ionChange"]],(function(t,e,n){var r=!0,o=t.component;return"ionBlur"===e&&(r=!1!==i.Nb(t,24)._handleBlurEvent(n.target)&&r),"ionChange"===e&&(r=!1!==i.Nb(t,24)._handleChangeEvent(n.target)&&r),"pointerup"===e&&(r=!1!==(1===n.which?o.resume(n):n.preventDefault())&&r),"pointerdown"===e&&(r=!1!==(1===n.which?o.pause(n):n.preventDefault())&&r),"contextmenu"===e&&(r=!1!==n.preventDefault()&&r),r}),r.O,r.p)),i.Qb(5120,null,p.b,(function(t){return[t]}),[o.Mb]),i.Ab(23,49152,[[1,4],["timeSlider",4]],0,o.cb,[i.j,i.p,i.F],{color:[0,"color"],max:[1,"max"],min:[2,"min"],value:[3,"value"]},null),i.Ab(24,16384,null,0,o.Mb,[i.p],null,null)],(function(t,e){var n=e.component;t(e,2,0,"tertiary"),t(e,4,0,n.playerService.playlist?"/playlist/"+n.playerService.playlist.id:null),t(e,5,0),t(e,9,0,n.playerService.playlist?"/playlist/"+n.playerService.playlist.id:null),t(e,10,0),t(e,18,0,"round"),t(e,20,0,n.playerService.isState("Playing")?"pause":"play","lg"),t(e,23,0,"danger",n.playerService.totalTime().time+1e-18,0,n.playerService.currentTime().time)}),(function(t,e){var n=e.component;t(e,6,0,null!=n.playerService.file&&n.playerService.file.thumbnail?null==n.playerService.file?null:n.playerService.file.thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO0sSv/DwADoQHyQmSPFwAAAABJRU5ErkJggg=="),t(e,12,0,n.playerService.file?n.playerService.file.title?n.playerService.file.title:n.playerService.file.filename:""),t(e,14,0,null!=n.playerService.file&&n.playerService.file.artist?n.playerService.file.artist:""),t(e,19,0,i.Nb(e,20).renderedIconHTML)}))}function d(t){return i.Vb(0,[i.Rb(671088640,1,{timeSlider:0}),(t()(),i.qb(16777216,null,null,1,null,h)),i.Ab(2,16384,null,0,a.j,[i.W,i.S],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,2,0,e.component.playerService.file)}),null)}}}]);